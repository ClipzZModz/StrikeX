<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StrikeX Customer Account</title>
    <!-- Favicon img -->
    <link rel="shortcut icon" href="/assets/images/favicon.png">
    <!-- Bootstrap min css -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <!-- All min css -->
    <link rel="stylesheet" href="/assets/css/all.min.css">
    <!-- Style css -->
    <link rel="stylesheet" href="/assets/css/style.css">

    <style type="text/css">


        .account-overview {
            margin-top: 10%!important;
        }

    </style>


</head>

<body style="background-color: #191919; color: #fff;">
    <%- include('partials/main/site_header') %>
    <%- include('partials/main/cart_system') %>

    <main>
        <!-- Account Overview Area Start -->
        <section class="account-overview mb-30" style="padding-top: 5%!important">
          <div class="container">
            <br />
            <% if(req.query.order) { %>
              <div class="alert alert-success" role="alert" style="text-align: center; font-size: 90%;">
                Many thanks for your order! You can view it below
              </div>
            <% } %>
            <br />
      
            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs mb-4" style="border-bottom: 1px solid #fa4f09; margin-top: -5%" role="tablist">
              <li class="nav-item" style="margin-right: 3px;">
                <a
                  class="nav-link active"
                  id="overview-tab"
                  data-bs-toggle="tab"
                  href="#overview"
                  role="tab"
                  aria-controls="overview"
                  aria-selected="true"
                  style="color: #fff; border-bottom-color: #fa4f09;"
                >
                <i class="fa-solid fa-file-invoice me-2"></i> Order Overview
                </a>
              </li>
              <li class="nav-item" style="margin-right: 3px;">
                <a
                  class="nav-link"
                  id="shipping-tab"
                  data-bs-toggle="tab"
                  href="#shipping"
                  role="tab"
                  aria-controls="shipping"
                  aria-selected="false"
                  style="color: #ccc; background-color: #1a1a1a; border: 1px solid #333; border-bottom-color: #fa4f09;"
                >
                <i class="fa-solid fa-truck me-2"></i> Shipping & Tracking
                </a>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  id="support-tab"
                  data-bs-toggle="tab"
                  href="#support"
                  role="tab"
                  aria-controls="support"
                  aria-selected="false"
                  style="color: #ccc; background-color: #1a1a1a; border: 1px solid #333; border-bottom-color: #fa4f09;"
                >
                <i class="fa-solid fa-headset me-2"></i> Support & Contact
                </a>
              </li>
            </ul>
            <style>
              .nav-tabs .nav-link.active {
                background-color: #2a2a2a !important;
                color: #fff !important;
                border: 1px solid #333 !important;
                border-bottom: 2px solid #fa4f09 !important;
              }
              .nav-tabs .nav-link:hover,
              .nav-tabs .nav-link:focus {
                background-color: #333 !important;
                color: #fff !important;
                border: 1px solid #333 !important;
                border-bottom: 2px solid #fa4f09 !important;
              }
              .nav-tabs .nav-link {
                transition: background-color 0.3s, color 0.3s;
              }


              .progress-bar {
                background-color: #fa4f09;
                transition: width 0.5s ease;
                }
            </style>
      
            <!-- Tab Content -->
            <div class="tab-content">
              <!-- Overview Tab -->
              <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
                
                <div class="row">

                    <div class="col-6">
                        <div class="mb-4" style="margin-top: 7%">
                            <h3 style="color: #fff;">
                              Viewing Order <span class="primary-color">#<%= order[0].id %></span>
                            </h3>
                            <p style="color: #ccc;">Hereâ€™s an overview of your order, with actions and details below.</p>
                          </div>
                    </div>

                    <div class="col-6">

                        <div class="card mt-4" style="margin-bottom: 5%; background: #1a1a1a; border: 1px solid #333; color: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <div class="card-header">
                              <h5 style="color: #fa4f09; margin: 0;">Order Progress</h5>
                            </div>
                            <div class="card-body">
                              <div class="progress" style="height: 20px; background: #333;">
                                <div class="progress-bar" role="progressbar" style="width: <%= order[0].status === 'processing' ? '33%' : order[0].status === 'shipped' ? '66%' : '100%' %>;" aria-valuenow="<%= order[0].status === 'processing' ? 33 : order[0].status === 'shipped' ? 66 : 100 %>" aria-valuemin="0" aria-valuemax="100">
                                  <%= order[0].status.charAt(0).toUpperCase() + order[0].status.slice(1) %>
                                </div>
                              </div>
                              <p class="mt-2" style="color: #ccc; font-size: 0.9em;">Your order is currently <%= order[0].status %>.</p>
                            </div>
                          </div>
                    </div>
                        
                </div>

                <div class="row">
                    <div class="col-md-8">
                      <div class="card" style="background: #1a1a1a; border: 1px solid #333; color: #fff;">
                        <div class="card-header" style="background: #2a2a2a; border-bottom: 1px solid #333;">
                          <h5 style="color: #fa4f09; margin: 0;">Order Items</h5>
                        </div>
                        <div class="card-body">
                          <table class="table table-dark table-borderless">
                            <thead>
                              <tr>
                                <th>Item</th>
                                <th>Quantity</th>
                                <th>Price</th>
                                <th>Total</th>
                              </tr>
                            </thead>
                            <tbody>
                              <% 
                                const items = JSON.parse(order[0].order_items);
                                items.forEach(item => { 
                              %>
                                <tr>
                                  <td>
                                    <div class="d-flex align-items-center">
                                      <img src="<%= item.image %>" alt="<%= item.title %>" style="width: 50px; height: 50px; object-fit: contain; margin-right: 10px;">
                                      <span><%= item.title %></span>
                                    </div>
                                  </td>
                                  <td><%= item.quantity %></td>
                                  <td>&pound;<%= item.price.toFixed(2) %></td>
                                  <td>&pound;<%=(item.price * item.quantity).toFixed(2) %></td>
                                </tr>
                              <% }) %>
                            </tbody>
                          </table>
                          <hr style="border-color: #333;">
                          <div class="d-flex justify-content-between">
                            <span style="color: #ccc;">Total Amount:</span>
                            <span style="color: #fa4f09;">&pound;<%= order[0].total_amount.toFixed(2) %> <%= order[0].currency %></span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="card" style="background: #1a1a1a; border: 1px solid #333; color: #fff;">
                        <div class="card-header" style="background: #2a2a2a; border-bottom: 1px solid #333;">
                          <h5 style="color: #fa4f09; margin: 0;">Order Summary</h5>
                        </div>
                        <div class="card-body">
                          <p><strong>Status:</strong> <span class="badge" style="background: #fa4f09;"><%= order[0].status %></span></p>
                          <p><strong>Payment Method:</strong> <%= order[0].payment_method.replace('_', ' ').toUpperCase() %></p>
                          <p><strong>Payment Status:</strong> <%= order[0].payment_status.toUpperCase() %></p>
                          <p><strong>Order Date:</strong> <%= new Date(order[0].created_at).toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' }) %></p>
                          <% if (order[0].customer_notes) { %>
                            <p><strong>Customer Notes:</strong> <%= order[0].customer_notes %></p>
                          <% } %>
                          <hr style="border-color: #333;">
                          <div class="d-flex flex-column gap-2">
                            <a href="#0" class="btn" style="background: #fa4f09; color: #fff; transition: background 0.3s;" onmouseover="this.style.background='#e63e00'" onmouseout="this.style.background='#fa4f09'">View Invoice</a>
                            <% if (order[0].status === 'processing') { %>
                              <a href="#0" class="btn" style="background: #333; color: #fff; transition: background 0.3s;" onmouseover="this.style.background='#444'" onmouseout="this.style.background='#333'">Cancel Order</a>
                            <% } %>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

            </div>
           
              <!-- Shipping Tab -->
              <div class="tab-pane fade" id="shipping" role="tabpanel" aria-labelledby="shipping-tab">
                <div class="mb-4" style="margin-top: 3%">
                  <h3 style="color: #fff;">Shipping & Tracking</h3>
                  <p style="color: #ccc;">Manage your shipping address and track your order below.</p>
                </div>
                <div class="row">
                  <div class="col-md-4">
                    <div class="card" style="background: #1a1a1a; border: 1px solid #333; color: #fff;">
                      <div class="card-header" style="background: #2a2a2a; border-bottom: 1px solid #333;">
                        <h5 style="color: #fa4f09; margin: 0;">Current Shipping Address</h5>
                      </div>
                      <div class="card-body">
                        <% const address = JSON.parse(order[0].shipping_address); %>
                        <p><strong>Full Name:</strong> <%= address.full_name %></p>
                        <p><strong>Address Line 1:</strong> <%= address.address_line1 %></p>
                        <% if (address.address_line2) { %>
                          <p><strong>Address Line 2:</strong> <%= address.address_line2 %></p>
                        <% } %>
                        <p><strong>City:</strong> <%= address.city %></p>
                        <p><strong>Postal Code:</strong> <%= address.postal_code %></p>
                        <p><strong>Country:</strong> <%= address.country %></p>
                        <% if (address.phone) { %>
                          <p><strong>Phone:</strong> <%= address.phone %></p>
                        <% } %>
                      </div>
                    </div>



                    <div class="card" style="background: #1a1a1a; border: 1px solid #333; color: #fff; margin-top: 5%;">
                        <div class="card-header" style="background: #2a2a2a; border-bottom: 1px solid #333;">
                          <h5 style="color: #fa4f09; margin: 0;">Tracking Information</h5>
                        </div>
                        <div class="card-body">
                          <p style="color: #ccc;">Tracking details are not available yet. You'll receive an update once your order ships.</p>
                          <a href="#0" class="btn" style="background: #fa4f09; color: #fff; transition: background 0.3s;" onmouseover="this.style.background='#e63e00'" onmouseout="this.style.background='#fa4f09'">Check Status</a>
                        </div>
                      </div>

                  </div>


                  <div class="col-md-8">
                    <div class="card" style="background: #1a1a1a; border: 1px solid #333; color: #fff;">
                      <div class="card-header" style="background: #2a2a2a; border-bottom: 1px solid #333;">
                        <h5 style="color: #fa4f09; margin: 0;">Update Shipping Address</h5>
                      </div>
                      <div class="card-body">
                        <form action="/order/<%= order[0].id %>/update-address" method="POST">
                          <div class="mb-3">
                            <label for="full_name" class="form-label" style="color: #ccc;">Full Name</label>
                            <input type="text" class="form-control" id="full_name" name="full_name" value="<%= address.full_name %>" required style="background: #2a2a2a; color: #fff; border: 1px solid #333;">
                          </div>
                          <div class="mb-3">
                            <label for="address_line1" class="form-label" style="color: #ccc;">Address Line 1</label>
                            <input type="text" class="form-control" id="address_line1" name="address_line1" value="<%= address.address_line1 %>" required style="background: #2a2a2a; color: #fff; border: 1px solid #333;">
                          </div>
                          <div class="mb-3">
                            <label for="address_line2" class="form-label" style="color: #ccc;">Address Line 2 (Optional)</label>
                            <input type="text" class="form-control" id="address_line2" name="address_line2" value="<%= address.address_line2 %>" style="background: #2a2a2a; color: #fff; border: 1px solid #333;">
                          </div>
                          <div class="mb-3">
                            <label for="city" class="form-label" style="color: #ccc;">City</label>
                            <input type="text" class="form-control" id="city" name="city" value="<%= address.city %>" required style="background: #2a2a2a; color: #fff; border: 1px solid #333;">
                          </div>
                          <div class="mb-3">
                            <label for="postal_code" class="form-label" style="color: #ccc;">Postal Code</label>
                            <input type="text" class="form-control" id="postal_code" name="postal_code" value="<%= address.postal_code %>" required style="background: #2a2a2a; color: #fff; border: 1px solid #333;">
                          </div>
                          <div class="mb-3">
                            <label for="country" class="form-label" style="color: #ccc;">Country</label>
                            <input type="text" class="form-control" id="country" name="country" value="<%= address.country %>" required style="background: #2a2a2a; color: #fff; border: 1px solid #333;">
                          </div>
                          <div class="mb-3">
                            <label for="phone" class="form-label" style="color: #ccc;">Phone (Optional)</label>
                            <input type="text" class="form-control" id="phone" name="phone" value="<%= address.phone %>" style="background: #2a2a2a; color: #fff; border: 1px solid #333;">
                          </div>
                          <button type="submit" class="btn" style="background: #fa4f09; color: #fff; width: 100%; transition: background 0.3s;" onmouseover="this.style.background='#e63e00'" onmouseout="this.style.background='#fa4f09'">Update Address</button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
      
              <!-- Support Tab -->
              <div class="tab-pane fade" id="support" role="tabpanel" aria-labelledby="support-tab">
                <div class="mb-4" style="margin-top: 3%">
                  <h3 style="color: #fff;">Support & Contact</h3>
                  <p style="color: #ccc;">Need help? Contact us or submit a support request below.</p>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="card" style="background: #1a1a1a; border: 1px solid #333; color: #fff;">
                      <div class="card-header" style="background: #2a2a2a; border-bottom: 1px solid #333;">
                        <h5 style="color: #fa4f09; margin: 0;">Contact Information</h5>
                      </div>
                      <div class="card-body">
                        <p><strong>Email:</strong> <a href="mailto:support@strikex.com" style="color: #fa4f09;">support@strikex.com</a></p>
                        <p><strong>Phone:</strong> +44 123 456 7890</p>
                        <p><strong>Hours:</strong> Mon-Fri, 9 AM - 5 PM</p>
                        <hr style="border-color: #333;">
                        <a href="#0" class="btn" style="background: #fa4f09; color: #fff; width: 100%; transition: background 0.3s;" onmouseover="this.style.background='#e63e00'" onmouseout="this.style.background='#fa4f09'">View FAQs</a>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="card" style="background: #1a1a1a; border: 1px solid #333; color: #fff;">
                      <div class="card-header" style="background: #2a2a2a; border-bottom: 1px solid #333;">
                        <h5 style="color: #fa4f09; margin: 0;">Submit a Support Request</h5>
                      </div>
                      <div class="card-body">
                        <form action="/order/<%= order[0].id %>/support" method="POST">
                          <div class="mb-3">
                            <label for="issue" class="form-label" style="color: #ccc;">Issue Type</label>
                            <select class="form-select" id="issue" name="issue" required style="background: #2a2a2a; color: #fff; border: 1px solid #333;">
                              <option value="">Select an issue</option>
                              <option value="delivery">Delivery Issue</option>
                              <option value="product">Product Issue</option>
                              <option value="payment">Payment Issue</option>
                              <option value="other">Other</option>
                            </select>
                          </div>
                          <div class="mb-3">
                            <label for="description" class="form-label" style="color: #ccc;">Description</label>
                            <textarea class="form-control" id="description" name="description" rows="4" required style="background: #2a2a2a; color: #fff; border: 1px solid #333;"></textarea>
                          </div>
                          <button type="submit" class="btn" style="background: #fa4f09; color: #fff; width: 100%; transition: background 0.3s;" onmouseover="this.style.background='#e63e00'" onmouseout="this.style.background='#fa4f09'">Submit Request</button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!-- Account Overview Area End -->
      </main>

    <!-- Bootstrap min Js -->
    <script src="/assets/js/bootstrap.min.js"></script>
    <!-- All min Js -->
    <script src="/assets/js/all.min.js"></script>
</body>

</html>




